Custom Queries in Spring Boot 
=============================
@Query annotation of spring data jpa is used to declare custom queries in JPQL (Java Persistence Query Language) and Native SQL.

@Param annotation of spring data jpa is used to bind method parameters with query parameters.

Diagram : sb7.1

Project structure 
-----------------
item-service 
|
|---src/main/java
|	|
	|---com.ihub.www
		|
		|---ItemServiceApplication.java
	|
	|---com.ihub.www.controller
		|
		|---ItemController.java

	|---com.ihub.www.service
		|		
		|---ItemService.java

	|---com.ihub.www.repo
		|
		|---ItemRepository.java (interface)

	|---com.ihub.www.model 
		|
		|---Item.java 
	
|---src/main/resources		
	|
	|---application.properties 
|
|---src/test/java
|
|---pom.xml 

step1:
------
	Create a spring starter project i.e item-service.
	ex:
		starters : 
				Spring Web 
				Spring Data JPA 
				MySQL Driver 
				Lombok 

step2:
------
	Create and use schema in mysql database.
	ex:
		MySQL> drop schema batch51;
		MySQL> create schema batch51;
		MySQL> use batch51;
		

step3:
------
	Create a Item table with records.
	ex:
	create table item(item_id int(3),item_name varchar(10),item_price int(6));
	insert into item values(101,'OPPO',10000);
	insert into item values(102,'LAVA',20000);
	insert into item values(103,'VIVO',30000);
	commit;
	select * from item;

step4:
------	
	Create a Item model inside "com.ihub.www.model" package.

Item.java
---------
package com.ihub.www.model;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import jakarta.persistence.Table;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Entity
@Table
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Item 
{
	@Id
	private Integer itemId;
	
	@Column
	private String itemName;
	
	@Column
	private Double itemPrice;
}

step5:
-----
	Create a ItemRepository inside "com.ihub.www.repo" package.

ItemRepository.java
-------------------
package com.ihub.www.repo;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import com.ihub.www.model.Item;

@Repository
public interface ItemRepository extends JpaRepository<Item, Integer>
{
	public Item findByItemName(String itemName);
	
	
	@Query(value="select * from item where item_name = :itemName", nativeQuery =  true)
	public Item findItemByName(@Param("itemName") String itemName);
}


	
step6:
-----
	Rename application.properties file to application.yml file.

step7:
------
	Configure server port, application name, mysql properties and hibernate 
	properties inside application.yml file.

application.yml 
---------------
server:
  port: 8181

spring:
  application:
    name: ITEM-SERVICE
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver 
    url: jdbc:mysql://localhost:3306/batch51
    username: root
    password: root 
  jpa:
   hibernate.ddl-auto: update 
   generate-ddl: true 
   show-sql: true 

step8:
------
	Create a ItemController inside "com.ihub.www.controller" package.

ItemController.java
------------------
package com.ihub.www.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.ihub.www.model.Item;
import com.ihub.www.service.ItemService;

@RestController
@RequestMapping("/item")
public class ItemController 
{

	@Autowired
	ItemService itemService;
	
	@GetMapping("/first/{itemId}")
	public Item getItem1(@PathVariable Integer itemId)
	{
		return itemService.getItem1(itemId);
	}
	
	@GetMapping("/second/{itemName}")
	public Item getItem2(@PathVariable String itemName)
	{
		return itemService.getItem2(itemName);
	}
	
	@GetMapping("/third/{itemName}")
	public Item getItem3(@PathVariable String itemName)
	{
		return itemService.getItem3(itemName);
	}
	
}


step9:
------
	Create a ItemService inside "com.ihub.www.service" package.

ItemService.java
-----------------
package com.ihub.www.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.ihub.www.model.Item;
import com.ihub.www.repo.ItemRepository;

@Service
public class ItemService 
{
	@Autowired
	ItemRepository itemRepository;
	
	public Item getItem1(Integer itemId)
	{
		return itemRepository.findById(itemId).get();
	}
	
	public Item getItem2(String itemName)
	{
		return itemRepository.findByItemName(itemName);
	}
	
	public Item getItem3(String itemName)
	{
		return itemRepository.findItemByName(itemName);
	}
}



step10:
------
	Run spring boot starter project.
step11:
------
	Test the application using postman tool.
	ex:
		HTTP Method		URL 
		-------------		------
		GET 			http://localhost:8181/item/first/101

		GET			http://localhost:8181/item/second/OPPO

		GET			http://localhost:8181/item/third/LAVA


































