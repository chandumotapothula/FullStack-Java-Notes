Spring Data JPA 
===============
Spring Data JPA is also known as Data Access Framework.

Spring Data JPA is a sub module of spring framework which is used interact with relational databases in java application using JPA (Java Persistence API).

Spring Data JPA is a part of a spring framework which helps to interact with databases using objects instead of writing complex SQL queries. 

ex:

	In order to fetch the data we need to write below query.
	ex:
		select * from student;

	With the help of spring data jpa , we can use below method.
	ex:
		findAll() 

It removes boiler plate code by providing some common database operations like 
findAll(), findById(), save(), delete() and etc.

It allows us to declare only method name , spring data jpa will write the query for you.

It works with JPA provider like Hibernate to handle all object relational mapping.

Spring Data JPA provides several repository interfaces, we can extend in our project to perfrom database operations, paging , sorting and etc.


We have following core repository interfaces commonly used in Spring Data JPA.

1. Repository<T, ID>
---------------------
> The base interface for all Spring Data repositories.
> Not intended to be used directly.


2. CrudRepository<T, ID>
-------------------------
> It extends Repository.
> Provides basic CRUD operations.
  ex:
	save(), findById(), findAll(), deleteById(), etc.


3. PagingAndSortingRepository<T, ID>
--------------------------------------
> It extends CrudRepository and adds pagination and sorting functionality.
  ex:
	findAll(Pageable pageable)
	findAll(Sort sort)


4. JpaRepository<T, ID>
------------------------
> It is most commonly used in repository in Spring Data JPA.
> It extends CrudRepository and PagingAndSortingRepository.
> It adds JPA-specific methods.
  ex:
	flush(), saveAndFlush(), deleteAllInBatch(), etc.


Diagram: sb3.1

Project Structure 
------------------
ThirdSB 
|
|---src/main/java
	|
	|---com.ihub.www (base pkg)
		|
		|---ThirdSbApplication.java

	|---com.ihub.www.controller
		|
		|---ProductController.java

	|---com.ihub.www.service
		|
		|---ProductService.java

	|---com.ihub.www.repository
		|
		|---ProductRepository.java (interface)

	|---com.ihub.www.model 	
		|
		|---Product.java

|---src/main/resources
	|
	|---application.properties

|---src/test/java
|
|-----src
	|
	|----main
		|
		|---webapp (custom folder)
			|
			|---index.jsp 
|---pom.xml
|
step1:
------
	Create a spring starter project i.e ThirdSB.
	ex:
		Starters:
				Spring Web 
				Spring Data JPA 
				H2 Database 

step2:
------
	Add Tomcat Embed Jasper dependency inside pom.xml file.
	ex:
		<dependency>
    			<groupId>org.apache.tomcat.embed</groupId>
    			<artifactId>tomcat-embed-jasper</artifactId>
		</dependency>	

step3:
------
	Create a model class i.e Product.java inside "com.ihub.www.model" package.

Product.java
------------
package com.ihub.www.model;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import jakarta.persistence.Table;

@Entity
@Table
public class Product 
{
	@Id
	private int prodId;
	
	@Column
	private String prodName;
	
	@Column
	private double prodPrice;

	public int getProdId() {
		return prodId;
	}

	public void setProdId(int prodId) {
		this.prodId = prodId;
	}

	public String getProdName() {
		return prodName;
	}

	public void setProdName(String prodName) {
		this.prodName = prodName;
	}

	public double getProdPrice() {
		return prodPrice;
	}

	public void setProdPrice(double prodPrice) {
		this.prodPrice = prodPrice;
	}
}

step4:
-----
	Create a Repository interface i.e ProductRepository.java inside "com.ihub.www.repository" package.

ProductRepository.java
----------------------
package com.ihub.www.repository;

import org.springframework.data.repository.CrudRepository;
import org.springframework.stereotype.Repository;
import com.ihub.www.model.Product;

@Repository
public interface ProductRepository extends CrudRepository<Product, Integer>
{

}

step5:
------
	Create a Controller i.e ProductController inside "com.ihub.www.controller" pkg.

ProductController.java
---------------------
package com.ihub.www.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import com.ihub.www.model.Product;
import com.ihub.www.service.ProductService;

@Controller
public class ProductController 
{
	@Autowired
	ProductService productService;
	
	@RequestMapping("/")
	public String home()
	{
		return "index.jsp";
	}
	
	@RequestMapping("/addProd")
	@ResponseBody
	public String addProduct(Product product)
	{
		return productService.addProduct(product);
	}
}



step6:
------
	Create a Service i.e ProductService.java file inside "com.ihub.www.service" pkg.

ProductService.java
-------------------
package com.ihub.www.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.ihub.www.model.Product;
import com.ihub.www.repository.ProductRepository;

@Service
public class ProductService 
{
	@Autowired
	ProductRepository productRepository;
	
	
	public String addProduct(Product product)
	{
		productRepository.save(product);
		return "Record Inserted";
	}
}



step7:
------
	Create a "webapp" folder inside "src/main" folder.

step8:
-----
	Create a index.jsp file inside "src/main/webapp" folder.

index.jsp
---------

<form action="addProd">

	<table align="center">
		<tr>
			<td>Product Id :</td>
			<td><input type="text" name="prodId"/></td>
		</tr>
		<tr>
			<td>Product Name :</td>
			<td><input type="text" name="prodName"/></td>
		</tr>
		<tr>
			<td>Product Price :</td>
			<td><input type="text" name="prodPrice"/></td>
		</tr>
		<tr>
			<td><input type="reset" value="reset"/></td>
			<td><input type="submit" value="submit"/></td>
		</tr>
	</table>
			
</form>

step9:
-----
	Configure application name, server port, h2 database, hibernate properties 
	inside application.properties file.

application.properties 
---------------------

spring.application.name=ThirdSB
server.port=9191

spring.datasource.driver-class-name= org.h2.Driver
spring.datasource.url= jdbc:h2:~/test
spring.datasource.username= sa
spring.datasource.password= 

spring.h2.console.enabled=true

spring.jpa.database-platform= org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto= update

step10:
-----
	Run spring boot starter project.

step11:
------
	Test the application by using below request url.
	ex:
		http://localhost:9191 
		http://localhost:9191/h2-console  
		





























