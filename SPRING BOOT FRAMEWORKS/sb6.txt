Q) What is the difference between PUT and PATCH method?

PUT 
----
	It is used to update all the fields of existing resource.

PATCH
-----
	It is used to update perticular field of existing resource.

CustomerController.java
-----------------------
package com.ihub.www.controller;

import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PatchMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.ihub.www.model.Customer;
import com.ihub.www.service.CustomerService;

@RestController
@RequestMapping("/customer")
public class CustomerController 
{
	@Autowired
	CustomerService customerService;
	
	@PostMapping("/add")
	public Customer addCustomer(@RequestBody Customer customer)
	{
		return customerService.addCustomer(customer);
	}
	
	@GetMapping("/fetch")
	public List<Customer> getAllCustomers()
	{
		return customerService.getAllCustomers();
	}
	
	@GetMapping("/fetch/{custId}")
	public Customer getCustomer(@PathVariable Integer custId)
	{
		return customerService.getCustomer(custId);
	}
	
	@PutMapping("/update")
	public ResponseEntity<Customer> updateCustomer(@RequestBody Customer customer)
	{
		return customerService.updateCustomer(customer);
	}
	
	@DeleteMapping("/delete/{custId}")
	public ResponseEntity<String> deleteCustomer(@PathVariable Integer custId)
	{
		return customerService.deleteCustomer(custId);
	}
	
	@PatchMapping("/update/{custId}")
	public ResponseEntity<Customer> nameUpdate(@PathVariable Integer custId,@RequestBody Map<String,Object> update)
	{
		return customerService.nameUpdate(custId,update);
	}
}

CustomerService.java
-------------------
package com.ihub.www.service;

import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Service;

import com.ihub.www.model.Customer;
import com.ihub.www.repo.CustomerRepository;

@Service
public class CustomerService 
{
	@Autowired
	CustomerRepository customerRepository;
	
	public Customer addCustomer(Customer customer)
	{
		return customerRepository.save(customer);
	}
	
	public List<Customer> getAllCustomers()
	{
		return customerRepository.findAll();
	}
	
	public Customer getCustomer(Integer custId)
	{
		return customerRepository.findById(custId).get();
	}
	
	public ResponseEntity<Customer> updateCustomer(Customer customer)
	{
		Customer old_cust = customerRepository.findById(customer.getCustId()).get();
		old_cust.setCustName(customer.getCustName());
		old_cust.setCustAddress(customer.getCustAddress());
		customerRepository.save(old_cust);
		return new ResponseEntity<>(old_cust,HttpStatus.OK);
	}
	
	public ResponseEntity<String> deleteCustomer(Integer custId)
	{
		Customer customer = customerRepository.findById(custId).get();
		customerRepository.delete(customer);
		return new ResponseEntity<>("Record Deleted",HttpStatus.OK);
	}
	
	public ResponseEntity<Customer> nameUpdate(Integer custId, Map<String,Object> update)
	{
		Customer customer = customerRepository.findById(custId).get();
		if(customer==null)
		{
			return new ResponseEntity<>(HttpStatus.NOT_FOUND);
		}
		else
		{
			update.forEach((key,value)->{
				switch(key)
				{
					case "custId" : customer.setCustId((Integer)value); break;
					case "custName" : customer.setCustName((String)value);break;
					case "custAddress" : customer.setCustAddress((String)value);break;
				}
			});
			
			customerRepository.save(customer);
			return new ResponseEntity<>(customer,HttpStatus.OK);
		}
	}
}

Request url
------------
	Method		URL
	-----		-----
	PATCH		http://localhost:9191/customer/update/101
			Body 
				Raw(JSON)
			{	
    				"custName":"Alina"	
			}

Exception Handling in Spring Boot 
=================================
If we give bad request to the application then our controller will throw one exception.
ex:
	http://localhost:9191/customer/fetch/102 

	{
    		"timestamp": "2025-10-28T07:24:16.662+00:00",
    		"status": 500,
    		"error": "Internal Server Error",
    		"path": "/customer/fetch/102"
	}

	Here 102 record is not present. Hence we will get exception.				
Handling the exceptions in API and providing proper solution is always good for enterprise applications.

We have two annotations to handle the exceptions in spring boot.

1) @ControllerAdvice 
--------------------
	It is a class level annotation.
	It is used to handle the exception globally.

2) @ExceptionHandler 
-------------------
	It is a method level annotation.
	It is used to handle perticular exception.

Project Structure 
-----------------
customer-service 
|
|---src/main/java
	|
	|---com.ihub.www (base pkg)
		|
		|---CustomerServiceApplication.java
	|
	|---com.ihub.www.controller
		|
		|---CustomerController.java

	|---com.ihub.www.service
		|
		|----CustomerService.java

	|---com.ihub.www.repo
		|	
		|---CustomerRepository.java (interface)

	|---com.ihub.www.model 
		|
		|---Customer.java
	|
	|---com.ihub.www.exception 
		|
		|---ErrorDetails.java
		|---ResourceNotFoundException.java
		|---GlobalExceptionHandler.java

|---src/main/resources
	|
	|---application.yml

|---src/test/java
|
|---pom.xml

step1:
------
	Create a "com.ihub.www.exception" package.

step2:
-----
	Create a "ErrorDetails.java" file inside "com.ihub.www.exception" package.

ErrorDetails.java
-----------------
package com.ihub.www.exception;

import java.util.Date;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class ErrorDetails 
{
	private Date timestamp;
	private String message;
	private String description;
}



step3:
------
	Create a "ResourceNotFoundException.java" file inside "com.ihub.www.exception" package.

ResourceNotFoundException.java
----------------------------
package com.ihub.www.exception;

public class ResourceNotFoundException extends RuntimeException 
{
	private static final long serialVersionUID = 1L;

	public ResourceNotFoundException(String message)
	{
		super(message);
	}
}


step4:
-----
	Create a "GlobalExceptionHandler.java" file inside "com.ihub.www.exception" package.

GlobalExceptionHandler.java
------------------------
package com.ihub.www.exception;

import java.util.Date;

import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.context.request.WebRequest;

@ControllerAdvice
public class GlobalExceptionHandler 
{
	@ExceptionHandler(ResourceNotFoundException.class)
	public ResponseEntity<?> handleResourceNotFoundException(ResourceNotFoundException exception, WebRequest request)
	{
		ErrorDetails errorDetails = new ErrorDetails(new Date(),exception.getMessage(),request.getDescription(false));
		return new ResponseEntity<>(errorDetails,HttpStatus.BAD_REQUEST);
	}
}


step5:
------	
	Goto CustomerService.java file and handle the exceptions.

CustomerService.java
---------------------
package com.ihub.www.service;

import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Service;

import com.ihub.www.exception.ResourceNotFoundException;
import com.ihub.www.model.Customer;
import com.ihub.www.repo.CustomerRepository;

@Service
public class CustomerService 
{
	@Autowired
	CustomerRepository customerRepository;
	
	public Customer addCustomer(Customer customer)
	{
		return customerRepository.save(customer);
	}
	
	public List<Customer> getAllCustomers()
	{
		return customerRepository.findAll();
	}
	
	public Customer getCustomer(Integer custId)
	{
		return customerRepository.findById(custId).orElseThrow(()-> new ResourceNotFoundException("Id Not Found"));
	}
	
	public ResponseEntity<Customer> updateCustomer(Customer customer)
	{
		Customer old_cust = customerRepository.findById(customer.getCustId()).orElseThrow(()-> new ResourceNotFoundException("Id Not Found"));
		old_cust.setCustName(customer.getCustName());
		old_cust.setCustAddress(customer.getCustAddress());
		customerRepository.save(old_cust);
		return new ResponseEntity<>(old_cust,HttpStatus.OK);
	}
	
	public ResponseEntity<String> deleteCustomer(Integer custId)
	{
		Customer customer = customerRepository.findById(custId).orElseThrow(()-> new ResourceNotFoundException("Id Not Found"));
		customerRepository.delete(customer);
		return new ResponseEntity<>("Record Deleted",HttpStatus.OK);
	}
	
	public ResponseEntity<Customer> nameUpdate(Integer custId, Map<String,Object> update)
	{
		Customer customer = customerRepository.findById(custId).orElseThrow(()-> new ResourceNotFoundException("Id Not Found"));
		if(customer==null)
		{
			return new ResponseEntity<>(HttpStatus.NOT_FOUND);
		}
		else
		{
			update.forEach((key,value)->{
				switch(key)
				{
					case "custId" : customer.setCustId((Integer)value); break;
					case "custName" : customer.setCustName((String)value);break;
					case "custAddress" : customer.setCustAddress((String)value);break;
				}
			});
			
			customerRepository.save(customer);
			return new ResponseEntity<>(customer,HttpStatus.OK);
		}
	}
}



step6:
------
	Run spring boot starter project.

step7:
------
	Test the application by using below request url.
	ex:
		HTTP Method 		URL
		------------		--------
		GET			http://localhost:9191/customer/fetch/102

		{
    			"timestamp": "2025-10-28T07:54:26.302+00:00",
    			"message": "Id Not Found",
    			"description": "uri=/customer/fetch/102"
		}





















