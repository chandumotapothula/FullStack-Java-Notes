step8
------
	Create a com.ihub.www.controller package inside "src/main/java".

step9:
------
	Create a UserController.java file inside "com.ihub.www.controller" package.

UserController.java
-------------------
package com.ihub.www.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.ihub.www.dto.UserRequest;
import com.ihub.www.model.User;
import com.ihub.www.service.UserService;

import jakarta.validation.Valid;

@RestController
@RequestMapping("/users")
public class UserController 
{
	@Autowired
	UserService userService;
	
	@PostMapping("/signup")
	public ResponseEntity<User> saveUser(@RequestBody @Valid UserRequest userRequest)
	{
		return new ResponseEntity<>(userService.saveUser(userRequest),HttpStatus.CREATED);
	}
	
	@GetMapping("/fetch")
	public ResponseEntity<List<User>> findAllUsers()
	{
		return ResponseEntity.ok(userService.findAllUsers());
	}
}


step10:
------
	Create a "com.ihub.www.service" package inside "src/main/java".

step11:
------
	Create a UserService.java file inside "com.ihub.www.service" package.

UserService.java
--------------
package com.ihub.www.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Service;
import org.springframework.web.bind.annotation.RequestBody;

import com.ihub.www.dto.UserRequest;
import com.ihub.www.model.User;
import com.ihub.www.repo.UserRepository;

import jakarta.validation.Valid;

@Service
public class UserService 
{
	@Autowired
	UserRepository userRepository;
	
	public User saveUser(UserRequest userRequest)
	{
		User user = User.build(0, userRequest.getName(),
							userRequest.getEmail(), 
							userRequest.getPhone(),
							userRequest.getAge(),
							userRequest.getGender(),
							userRequest.getNationality());
		
		return userRepository.save(user);
	}
	
	public List<User> findAllUsers()
	{
		return userRepository.findAll();
	}
	
}

step12:
-------
	Create a "com.ihub.www.advice" package inside "src/main/java".

step13:
------
	Creat a "ApplicationExceptionHandler.java" file inside "com.ihub.www.advice" pkg.

ApplicationExceptionHandler.java
---------------------------------
package com.ihub.www.advice;

import java.util.LinkedHashMap;
import java.util.Map;

import org.springframework.http.HttpStatus;
import org.springframework.web.bind.MethodArgumentNotValidException;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.ResponseStatus;
import org.springframework.web.bind.annotation.RestControllerAdvice;

@RestControllerAdvice
public class ApplicationExceptionHandler 
{
	@ResponseStatus(value = HttpStatus.BAD_REQUEST)
	@ExceptionHandler(MethodArgumentNotValidException.class)
	public Map<String,String> handleInvalidArgument(MethodArgumentNotValidException ex)
	{
		Map<String,String> errorMap = new LinkedHashMap<String,String>();
		ex.getBindingResult().getFieldErrors().forEach(error -> {
			errorMap.put(error.getField(), error.getDefaultMessage());
		});
		
		return errorMap;
	}
}

step14:
------
	Run spring boot starter project.

step15:
------
	Test the application by using below request url.
	ex:
		HTTP Method 		URL 
		---------		-------
		POST 			http://localhost:9191/users/signup
					Body 
						RAW(JSON)
					{	
    						"name":null,
    						"email":"raja@gmail.com",
    						"phone":12345,
    						"age":25,
    						"gender":"",
    						"nationality": "indian"	
					}

		GET			http://localhost:9191/users/fetch
































