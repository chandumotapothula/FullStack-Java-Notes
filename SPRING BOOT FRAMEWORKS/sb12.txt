API 
====
API stands for Application Programming Interface.

API is a mechanism that enables two software components to communication with each other using set of rules and protocols.

API acts like a interface between two software applications to exchange the data.

Diagram: sb12.1


We have four types of API's.

1) public API 
------------
	It is open and available for use by any outside developers.
	ex:
		https://api.restful-api.dev/objects

2) private API 
----------------
	It is also known as internal API.
	It is available for use in enterprise to connect the system.

3) partner API 
-------------
	It is available to specifically selected and authorized outside developers.

4) Composite API 
----------------
	It is generally combination of two or more then two API's.



Spring Boot API Validation 
==========================
API validation is a process of ensuring that the data recieved by the API is valid before it is processed. It helps in maintaining data integrity, prevent errors and improve overall reliability of the application.

To perform API validation in spring boot we need to use DTO's.

DTO stands for Data Transfer Object.

DTO is essential in java applications to transfer the data between multiple layers and services.

DTO encapsulate the data, reduces number of methods calls , improve performance and decoupling the layers.

DTO is usedful in multi-layered architecture, microservices and when we are interacting with external API's.

DTO makes our application maintainable, scalable and efficient.

Project Structure 
-----------------
api-validation 
|
|---src/main/java
	|
	|---com.ihub.www
		|
		|---ApiValidationApplication.java
	|
	|---com.ihub.www.model 		
		|
		|---User.java
 
	|---com.ihub.www.dto 
		|
		|---UserRequest.java

	|---com.ihub.www.repo
		|
		|---UserRepository.java (interface)

	|---com.ihub.www.service
		|
		|---UserService.java

	|---com.ihub.www.controller
		|
		|---UserController.java

	|---com.ihub.www.advice
		|
		|---ApplicationExceptionHandler.java
|
|---src/main/resources
	|
	|---application.yml 
|
|---src/test/java
|
|---pom.xml 

step1:
------
	Create a spring starter project i.e api-validation.
	ex:
		Starters:
				Spring Web
				Spring Data JPA
				Lombok 
				MySQL Driver
				Validation 

step2:
-----
	Create a User model inside "com.ihub.www.model" package.

User.java
---------
package com.ihub.www.model;

import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.Id;
import jakarta.persistence.Table;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Entity
@Table(name="user_tbl")
@Data
@AllArgsConstructor(staticName="build")
@NoArgsConstructor
public class User 
{
	@Id
	@GeneratedValue
	private int id;
	private String name;
	private String email;
	private String phone;
	private int age;
	private String gender;
	private String nationality;
}


step3:
-----
	Create a UserRequest DTO inside "com.ihub.www.dto" package.

UserRequest.java
----------------
package com.ihub.www.dto;

import jakarta.validation.constraints.Email;
import jakarta.validation.constraints.Max;
import jakarta.validation.constraints.Min;
import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.NotNull;
import jakarta.validation.constraints.Pattern;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor(staticName="build")
@NoArgsConstructor
public class UserRequest 
{
	@NotNull(message = "Name is mandatory")
	private String name;
	
	@Email(message="Invalid Email")
	private String email;
	
	@NotNull
	@Pattern(regexp = "^\\d{10}$", message="Invalid Phone Number")
	private String phone;
	
	@Min(18)
	@Max(60)
	private int age;
	
	@NotNull
	private String gender;
	
	@NotBlank
	private String nationality;
}

step4:
-----
	Create a UserRepository inside "com.ihub.www.repo" package.

UserRepository.java
-------------------
package com.ihub.www.repo;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

import com.ihub.www.model.User;

@Repository
public interface UserRepository extends JpaRepository<User, Integer>
{
	
}

step5:
------
	Create a schema and use the schema in mysql database.
	ex:
		drop schema batch51;
		create schema batch51;
		use batch51;

step6:
------
	Rename application.properties file to application.yml file.


step7:
------
	Configure server port, database properties and hibernate properties inside 
	application.yml file.
	
application.yml 
---------------
server:
  port: 9191

spring:
  application:
    name: API-VALIDATION 
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/batch51
    username: root
    password: root
  jpa:
    hibernate.ddl-auto: update
    generate-ddl: true
    show-sql: true  


