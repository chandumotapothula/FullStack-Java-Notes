
Project Structure 
-----------------
customer-service 
|
|---src/main/java
	|
	|---com.ihub.www (base pkg)
		|
		|---CustomerServiceApplication.java
	|
	|---com.ihub.www.controller
		|
		|---CustomerController.java

	|---com.ihub.www.service
		|
		|----CustomerService.java

	|---com.ihub.www.repo
		|	
		|---CustomerRepository.java (interface)

	|---com.ihub.www.model 
		|
		|---Customer.java

|---src/main/resources
	|
	|---application.yml

|---src/test/java
|
|---pom.xml
|

step1:
------
	Download and install project lombok.
	ex:
		https://projectlombok.org/download


step2:
------
	Create a spring starter project i.e customer-service.
	ex:
		Starters:
				Spring Web 
				Spring Data JPA 
				MySQL Driver 
				Lombok 

step3:
-----
	Create a Customer model inside "com.ihub.www.model" package.

Customer.java
-------------
package com.ihub.www.model;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import jakarta.persistence.Table;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Entity
@Table(name="customers")
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Customer 
{
	@Id
	private Integer custId;
	
	@Column
	private String custName;
	
	@Column
	private String custAddress;
}

step4:
-------
	Create a CustomerRepository inside "com.ihub.www.repo" package.

CustomerRepository.java
------------------------
package com.ihub.www.repo;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

import com.ihub.www.model.Customer;

@Repository
public interface CustomerRepository extends JpaRepository<Customer, Integer>
{

}

step5:
------
	Create and use schema in mysql database.
	ex:
		show databases;
		drop schema batch51;
		create schema batch51;
		use batch51;

step6:
------
	Rename application.properties file to application.yml file.


step7:
------
	Configure server port, application name, database properties and hibernate properties 
	inside application.yml file.


application.yml
---------------
server:
  port: 9191

spring:
  application:
    name: CUSTOMER-SERVICE
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver 
    url: jdbc:mysql://localhost:3306/batch51
    username: root
    password: root 
  jpa:
    hibernate.ddl-auto: update 
    generate-ddl: true
    show-sql: true

step8:
------
	Create a CustomerController inside "com.ihub.www.controller" package.

CustomerController.java
-----------------------
package com.ihub.www.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.ihub.www.model.Customer;
import com.ihub.www.service.CustomerService;

@RestController
@RequestMapping("/customer")
public class CustomerController 
{
	@Autowired
	CustomerService customerService;
	
	@PostMapping("/add")
	public Customer addCustomer(@RequestBody Customer customer)
	{
		return customerService.addCustomer(customer);
	}
	
	@GetMapping("/fetch")
	public List<Customer> getAllCustomers()
	{
		return customerService.getAllCustomers();
	}
	
	@GetMapping("/fetch/{custId}")
	public Customer getCustomer(@PathVariable Integer custId)
	{
		return customerService.getCustomer(custId);
	}
	
	@PutMapping("/update")
	public ResponseEntity<Customer> updateCustomer(@RequestBody Customer customer)
	{
		return customerService.updateCustomer(customer);
	}
	
	@DeleteMapping("/delete/{custId}")
	public ResponseEntity<String> deleteCustomer(@PathVariable Integer custId)
	{
		return customerService.deleteCustomer(custId);
	}
}


step9:
------
	Create a CustomerService inside "com.ihub.www.service" package.
	
CustomerService.java
---------------------
package com.ihub.www.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Service;

import com.ihub.www.model.Customer;
import com.ihub.www.repo.CustomerRepository;

@Service
public class CustomerService 
{
	@Autowired
	CustomerRepository customerRepository;
	
	public Customer addCustomer(Customer customer)
	{
		return customerRepository.save(customer);
	}
	
	public List<Customer> getAllCustomers()
	{
		return customerRepository.findAll();
	}
	
	public Customer getCustomer(Integer custId)
	{
		return customerRepository.findById(custId).get();
	}
	
	public ResponseEntity<Customer> updateCustomer(Customer customer)
	{
		Customer old_cust = customerRepository.findById(customer.getCustId()).get();
		old_cust.setCustName(customer.getCustName());
		old_cust.setCustAddress(customer.getCustAddress());
		customerRepository.save(old_cust);
		return new ResponseEntity<>(old_cust,HttpStatus.OK);
	}
	
	public ResponseEntity<String> deleteCustomer(Integer custId)
	{
		Customer customer = customerRepository.findById(custId).get();
		customerRepository.delete(customer);
		return new ResponseEntity<>("Record Deleted",HttpStatus.OK);
	}
}



step10:
-------
	Download and install POSTMAN tool.
	ex:
		https://www.postman.com/downloads/

step11:
-------
	Run spring boot starter project.

step12:
------
	Test the application by using postman tool.
	ex:
		Http Method		URL
		------------		-------
		POST			http://localhost:9191/customer/add
					Body 
						Raw (JSON)
					{	
						"custId":101,
    						"custName":"Alan",
    						"custAddress":"Florida"	
					}

		GET			http://localhost:9191/customer/fetch

		GET			http://localhost:9191/customer/fetch/101

		PUT			http://localhost:9191/customer/update 
					Body
						Raw(json)
					{	
						"custId":102,
    						"custName":"Jessica",
    						"custAddress":"Chicago"	
					}

		DELETE			http://localhost:9191/customer/delete/102 





















